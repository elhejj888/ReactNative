{"version":3,"names":["_react","require","_FrameProcessorPlugins","_WorkletsProxy","_SkiaProxy","getRotationDegrees","orientation","Error","getPortraitSize","frame","width","height","createSkiaFrameProcessor","frameProcessor","surfaceHolder","offscreenTextures","Skia","SkiaProxy","Worklets","WorkletsProxy","getSkiaSurface","_surfaceHolder$value$","_surfaceHolder$value$2","_surfaceHolder$value$4","threadId","getCurrentThreadId","size","value","_surfaceHolder$value$3","surface","Surface","MakeOffscreen","dispose","createDrawableFrameProxy","canvas","nativeBuffer","getNativeBuffer","image","Image","MakeImageFromNativeBuffer","pointer","Proxy","get","_","property","paint","save","rotation","rotate","drawImage","restore","delete","wrapFrameProcessorWithRefCounting","getCanvas","drawableFrame","black","Color","clear","flush","snapshot","makeImageSnapshot","snapshotCopy","makeNonTextureImage","push","length","texture","shift","type","useSkiaFrameProcessor","dependencies","useSharedValue","useEffect","_VisionCameraProxy$wo","VisionCameraProxy","workletContext","runAsync","surfaces","Object","values","map","v","forEach","s","useMemo"],"sourceRoot":"../../../src","sources":["skia/useSkiaFrameProcessor.ts"],"mappings":"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"}