{"version":3,"names":["_CameraError","require","_NativeCameraModule","_JSIHelper","_WorkletsProxy","errorMessage","hasWorklets","isAsyncContextBusy","value","runOnAsyncContext","_frame","_func","CameraRuntimeError","throwJSError","error","assertJSIAvailable","Worklets","WorkletsProxy","throwErrorOnJS","createRunOnJS","message","stack","Error","name","jsEngine","global","ErrorUtils","reportFatalError","__ErrorUtils","console","safeError","createSharedValue","asyncContext","createContext","createRunAsync","frame","func","e","internal","decrementRefCount","proxy","initFrameProcessorPlugin","removeFrameProcessor","setFrameProcessor","workletContext","undefined","result","CameraModule","installFrameProcessorBindings","VisionCameraProxy","exports","getLastFrameProcessorCall","frameProcessorFuncId","_global$__frameProces","__frameProcessorRunAtTargetFpsMap","setLastFrameProcessorCall","runAtTargetFps","fps","funcId","__workletHash","targetIntervalMs","now","performance","diffToLastCall","runAsync","incrementRefCount","wrapFrameProcessorWithRefCounting","frameProcessor"],"sourceRoot":"../../src","sources":["FrameProcessorPlugins.ts"],"mappings":"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"}